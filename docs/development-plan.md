# 域名邮箱管理器 - 开发计划文档

## 📋 项目概述

基于cursor-auto-free项目的核心邮箱功能，开发一个独立的桌面应用程序，提供用户友好的GUI界面来管理域名邮箱的生成、验证和管理。

## 🛠️ 技术栈选择

### 推荐技术栈：PyQt6 + SQLite + PyInstaller

**前端框架：PyQt6 + QML**
- QML现代化声明式UI（默认推荐）
- QWidget传统界面（兼容备选）
- Material Design风格和流畅动画
- 与现有Python代码完美集成
- 跨平台支持（Windows/Mac/Linux）
- GPU加速渲染和响应式布局

**数据库：SQLite**
- 轻量级，无需额外安装
- 支持复杂查询和事务
- Python原生支持
- 适合桌面应用数据量

**打包工具：PyInstaller**
- 成熟稳定，支持PyQt
- 单文件exe分发
- 支持图标和版本信息
- 可隐藏控制台窗口

## 📁 项目结构设计

```
email-domain-manager/
├── src/                          # 源代码目录
│   ├── main.py                   # 应用程序入口
│   ├── models/                   # 数据模型层
│   │   ├── __init__.py
│   │   ├── email_model.py        # 邮箱数据模型
│   │   ├── config_model.py       # 配置数据模型
│   │   └── tag_model.py          # 标签数据模型
│   ├── services/                 # 业务逻辑层
│   │   ├── __init__.py
│   │   ├── email_service.py      # 邮箱生成和验证服务
│   │   ├── config_service.py     # 配置管理服务
│   │   ├── database_service.py   # 数据库服务
│   │   └── validation_service.py # 验证服务
│   ├── controllers/              # 控制器层
│   │   ├── __init__.py
│   │   ├── email_controller.py   # 邮箱控制器
│   │   └── config_controller.py  # 配置控制器
│   ├── views/                    # 视图层
│   │   ├── __init__.py
│   │   ├── main_window.py        # 主窗口
│   │   ├── email_generation_page.py  # 邮箱申请页面
│   │   ├── email_management_page.py  # 邮箱管理页面
│   │   └── configuration_page.py     # 配置管理页面
│   ├── utils/                    # 工具类
│   │   ├── __init__.py
│   │   ├── crypto_utils.py       # 加密工具
│   │   ├── file_utils.py         # 文件操作工具
│   │   └── logger.py             # 日志工具
│   └── resources/                # 资源文件
│       ├── icons/                # 图标文件
│       ├── styles/               # 样式文件
│       └── database/             # 数据库初始化脚本
├── tests/                        # 测试代码
├── docs/                         # 文档目录
├── requirements.txt              # 依赖包列表
├── build.py                      # 构建脚本
└── README.md                     # 项目说明
```

## 🚀 开发阶段规划

### Phase 1: 基础架构搭建 (Week 1-2)

**任务清单：**
- [ ] 创建项目目录结构
- [ ] 设置开发环境和依赖管理
- [ ] 从cursor-auto-free提取核心模块
- [ ] 重构EmailGenerator和EmailVerificationHandler
- [ ] 设计数据库表结构
- [ ] 创建基础的PyQt6应用框架

**关键文件：**
- `src/services/email_service.py` - 重构邮箱核心功能
- `src/services/database_service.py` - 数据库初始化
- `src/main.py` - 应用程序入口

**验收标准：**
- 应用程序可以启动并显示基础窗口
- 数据库可以正常创建和连接
- 核心邮箱生成逻辑可以独立运行

### Phase 2: 核心功能开发 (Week 3-4)

**任务清单：**
- [ ] 实现EmailService完整功能
- [ ] 实现ConfigService配置管理
- [ ] 实现DatabaseService数据持久化
- [ ] 创建基础的数据模型类
- [ ] 实现配置文件的读取和写入

**关键功能：**
- 邮箱生成算法（保持与原项目一致）
- 验证码获取机制（支持tempmail.plus和IMAP）
- 配置文件管理（.env文件处理）
- 数据库CRUD操作

**验收标准：**
- 可以成功生成域名邮箱
- 可以获取验证码（至少支持一种方式）
- 配置可以正确保存和加载
- 邮箱记录可以存储到数据库

### Phase 3: GUI页面开发 (Week 5-7)

**任务清单：**
- [ ] 开发邮箱申请页面UI
- [ ] 开发邮箱管理页面UI
- [ ] 开发配置管理页面UI
- [ ] 实现页面间的数据传递
- [ ] 添加进度条和状态提示

**页面详细设计：**

**3.1 邮箱申请页面**
- 左侧面板：当前配置信息展示
- 中央区域：生成按钮和进度条
- 右侧面板：实时日志输出
- 底部状态栏：操作状态提示

**3.2 邮箱管理页面**
- 顶部工具栏：搜索框、筛选器、刷新按钮
- 主表格：邮箱列表（邮箱地址、创建时间、标签、状态）
- 右侧面板：标签管理和详细信息
- 底部操作栏：导出、删除、批量操作

**3.3 配置管理页面**
- 分组配置表单：域名设置、IMAP配置、tempmail设置
- 配置验证按钮：测试连接和验证配置
- 导入/导出功能：配置文件管理
- 帮助文档：配置说明和示例

**验收标准：**
- 所有页面UI完整且美观
- 页面间切换流畅
- 基础交互功能正常

### Phase 4: 高级功能实现 (Week 8-9)

**任务清单：**
- [ ] 实现标签系统（创建、编辑、删除、关联）
- [ ] 实现搜索和筛选功能
- [ ] 实现数据导出功能（CSV/JSON）
- [ ] 实现配置验证功能
- [ ] 添加批量操作功能

**功能详细设计：**

**4.1 标签系统**
- 标签CRUD操作
- 邮箱与标签的多对多关联
- 标签颜色和图标自定义
- 按标签筛选邮箱

**4.2 搜索筛选**
- 邮箱地址模糊搜索
- 按创建时间范围筛选
- 按标签筛选
- 组合条件搜索

**4.3 数据导出**
- CSV格式导出（Excel兼容）
- JSON格式导出（程序间交换）
- 自定义导出字段选择
- 导出进度提示

**验收标准：**
- 标签系统完整可用
- 搜索筛选响应迅速
- 导出功能正确无误

### Phase 5: 安全性和打包 (Week 10-11)

**任务清单：**
- [ ] 实现配置文件加密
- [ ] 实现敏感数据保护
- [ ] 配置PyInstaller打包
- [ ] 创建安装程序
- [ ] 跨平台测试

**安全性设计：**
- AES加密敏感配置
- 用户主密码保护
- 内存数据及时清理
- 日志脱敏处理

**打包配置：**
- 单文件exe生成
- 图标和版本信息
- 依赖库打包
- 启动优化

**验收标准：**
- 敏感信息得到保护
- 打包程序可以独立运行
- 在目标平台正常工作

## 📊 开发里程碑

| 里程碑 | 时间 | 主要交付物 | 验收标准 |
|--------|------|------------|----------|
| M1 | Week 2 | 基础架构 | 应用可启动，核心功能可用 |
| M2 | Week 4 | 核心功能 | 邮箱生成和验证完整可用 |
| M3 | Week 7 | GUI完成 | 三个主要页面功能完整 |
| M4 | Week 9 | 高级功能 | 标签、搜索、导出功能可用 |
| M5 | Week 11 | 最终版本 | 可分发的exe程序 |

## 🔧 开发环境配置

**必需软件：**
- Python 3.9+
- PyQt6
- SQLite3
- PyInstaller

**推荐IDE：**
- PyCharm Professional
- VS Code + Python扩展

**开发工具：**
- Qt Designer (UI设计)
- DB Browser for SQLite (数据库管理)
- Git (版本控制)

## 📝 代码规范

**Python代码规范：**
- 遵循PEP 8标准
- 使用类型提示
- 完整的文档字符串
- 单元测试覆盖

**Git提交规范：**
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式
- refactor: 重构
- test: 测试相关

## 🎯 质量保证

**测试策略：**
- 单元测试：核心业务逻辑
- 集成测试：模块间交互
- UI测试：界面功能验证
- 性能测试：大数据量处理

**代码审查：**
- 每个功能模块完成后进行代码审查
- 关注安全性、性能、可维护性
- 确保符合架构设计原则


